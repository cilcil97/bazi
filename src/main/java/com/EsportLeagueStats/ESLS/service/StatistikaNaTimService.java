package com.EsportLeagueStats.ESLS.service;import com.EsportLeagueStats.ESLS.model.Sezona;import com.EsportLeagueStats.ESLS.model.StatistikaNaTim;import com.EsportLeagueStats.ESLS.model.Tim;import com.EsportLeagueStats.ESLS.persistance.StatistikaNaTimRepository;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;import java.util.List;@Servicepublic class StatistikaNaTimService {    private final StatistikaNaTimRepository repository;    private final UtakmicaService utakmicaService;    public StatistikaNaTimService(StatistikaNaTimRepository repository, UtakmicaService utakmicaService) {        this.repository = repository;        this.utakmicaService = utakmicaService;    }    public List<StatistikaNaTim> findAllTimStats() {        return repository.findAll();    }    public StatistikaNaTim findStatsTimById(int id) {        return repository.findById(id).orElseThrow(() -> new RuntimeException("Nema Takov stat"));    }    public List<StatistikaNaTim> findByTeam(Tim tim) {        return repository.findByTim(tim);    }    @Transactional    public StatistikaNaTim addStatistika(Integer poeniVo10Min, Tim tim, Sezona sezona) {        long numberOfWinsInSeason = utakmicaService.countAllWinsBySezonaAndTeam(sezona, tim);        StatistikaNaTim statistikaNaTim = new StatistikaNaTim(numberOfWinsInSeason, poeniVo10Min, tim, sezona);        return repository.save(statistikaNaTim);    }}